from django.core.management.base import BaseCommand
from apps.products.models import Product, ProductReview
import random


class Command(BaseCommand):
    help = '–°—Ç–≤–æ—Ä—é—î —Ç–µ—Å—Ç–æ–≤—ñ –≤—ñ–¥–≥—É–∫–∏ –¥–ª—è —Ç–æ–≤–∞—Ä—ñ–≤'

    def handle(self, *args, **options):
        reviews_data = [
            {
                'author_name': '–ê–Ω–æ–Ω—ñ–º',
                'rating': 5,
                'text': '–í –º–µ–Ω–µ –∫–ª–∞—Å–Ω—ñ –¥—Ä—É–∑—ñ, –ø–æ–¥–∞—Ä—É–≤–∞–ª–∏ –º–µ–Ω—ñ –æ–¥–Ω–æ–∑–Ω–∞—á–Ω—É —Ü–µ–π –º–∞—Å—Ç—É—Ä–±–∞—Ç–æ—Ä —ñ —è –æ—Ñ—ñ–≥–µ–ª–∞ –≤—ñ–¥ –≤—ñ–¥—á—É—Ç—Ç—è! –¶–µ –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è, –∞ –∑ –Ω–∏–º –≤—ñ–¥—á—É—Ç—Ç—è –∞–∂ –Ω—ñ–±–∏ —Å–ø—Ä–∞–≤–∂–Ω—î —Ö–≤–∏–ª–∏–Ω–∫–∞ –¥—É–∂–µ –∑–∞–¥–æ–≤–æ–ª–µ–Ω–∞! –î—è–∫—É—é –∑–∞ —à–≤–∏–¥–∫—É –¥–æ—Å—Ç–∞–≤–∫—É :D',
                'category_badge': '–ü—ñ—Ö–≤–∞'
            },
            {
                'author_name': '–≥–∞—è',
                'rating': 5,
                'text': '–≤–∑—è–ª–∏ —Ü–µ –∫—ñ–ª—å—Ü–µ –∑ —Ö–ª–æ–ø—Ü–µ–º, —â–æ–± –º–æ–∂–Ω–∞ –±—É–ª–æ –æ–±–æ–º –∑—Ä–æ–±–∏—Ç–∏ –ø—Ä–∏—î–º–Ω–æ –≤—ñ–¥ —á–∞—Å —Å–µ–∫—Å—É –Ω–µ –∑–Ω–∞—é –∫–æ–º—É —è–∫, –∞–ª–µ –Ω–∞–º –≤—Å–µ –ø—ñ–¥—ñ—à–ª–æ –ø–æ —Ä–æ–∑–º—ñ—Ä—É —ñ –º–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞–ª–∏—Å—è —Ö–≤–∏–ª–∏–Ω 7 –ø—Ä–æ–±–ª–µ–º –Ω–µ –±—É–ª–æ –Ω–æ–º –Ω–∞ –∫–æ–∂–µ–Ω —Ä–∞–∑ –∞–Ω—ñ 6 —Ä–∞–∑–Ω—å–æ–º–∞–Ω—ñ—Ç—Ç—è–º –Ω–∞–¥–æ –ø—ñ–¥—Ö–æ–¥–∏–ª–∏—Å—è –æ–¥–Ω–∞–∫',
                'category_badge': '–ï—Ä–µ–∫—Ü—ñ–π–Ω—ñ –∫—ñ–ª—å—Ü—è'
            },
            {
                'author_name': '–ê–ª–µ–∫—Å',
                'rating': 4,
                'text': '–î–æ–≤–≥–∏–π —á–∞—Å –∫–æ—Ä–∏—Å—Ç—É–≤–∞–ª–∞—Å—è –ø—ñ–Ω–≥–≤—ñ–Ω–æ–∫ —Å–∞—Ç—ñ—Å—Ñ–∞–µ—Ä —ñ –º–µ–Ω–µ –≤—Å–µ –≤–ª–∞—à—Ç–æ–≤—É–≤–∞–ª–æ –±—ñ–ª—å—à–µ –Ω—ñ–∂, —Ç–∞ –∑–∞—Ö–æ—Ç—ñ–ª–æ—Å—è –ø—Ä–æ–±—É–≤–∞—Ç–∏ —â–æ—Å—å –Ω–æ–≤–µ —ñ –Ω–µ –ø—Ä–æ–≥–∞–¥–∞–ª–∞! –ó–∞ —Ü—ñ–Ω–æ—é –º–æ–∂–Ω–æ –≤—ñ–¥—Ç–∞–Ω—è –Ω–µ —Ç–∞ —ñ –∑–∞ —è–∫—ñ—Å—Ç—é –æ–¥–Ω–æ —ñ —Ç–µ —Å–∞–º–µ –∑—Ä–æ–∑—É–º—ñ–ª–æ–≥–æ –ø–æ–±—ñ–ª–¥–æ–≤–∞ —â–æ –æ–¥–Ω–∞ –ø—Ä–∞—Ü—é—î –∫–æ–º —ñ–∑ —Å—Ç–∏–º—É–ª—è—Ç–æ—Ä–æ–º –¥–ª—è –∫–ª—ñ—Ç–æ—Ä–∞ —ñ —Ç–∞–∫–æ–∂ –¥—ñ–π—Å—Ç—ñ–≤ –ú–æ–∂–ª–∏–≤–æ –∑ —ñ –∑–≥—ñ—Ä—à–µ—é —Ç–∞–∫ –±—É–¥–µ',
                'category_badge': '–í–∞–∫—É—É–º–Ω—ñ —Å—Ç–∏–º—É–ª—è—Ç–æ—Ä–∏'
            },
            {
                'author_name': '–ú—ñ—Ö–∞–π–ª–æ',
                'rating': 5,
                'text': '–ü—ñ–¥–∫–∞–∂—ñ—Ç—å –±—É–¥—å-–ª–∞—Å–∫–∞ —á–∏–º –º–æ–∂–ª–∏–≤—ñ –∑–∞–º—ñ–Ω–∏—Ç–∏ –∫—Ä–µ–º ? –±—É–ª–æ –± —Å—É–ø–µ—Ä —è–∫—â–æ –º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ –∑–≤–∏—á–∞–π–Ω–∏–π –∫—Ä–µ–º? –ë—É–¥—É —á–µ–∫–∞—Ç–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ? –î—è–∫—É—é',
                'category_badge': '–ú–∞—Å—Ç—É—Ä–±–∞—Ç–æ—Ä'
            },
            {
                'author_name': '–û–ª—å–≥–∞',
                'rating': 5,
                'text': '–ß—É–¥–æ–≤–∏–π –≤—ñ–±—Ä–∞—Ç–æ—Ä! –ö–æ–º–ø–∞–∫—Ç–Ω–∏–π, –ø–æ—Ç—É–∂–Ω–∏–π, —ñ–¥–µ–∞–ª—å–Ω–æ –ø—ñ–¥—Ö–æ–¥–∏—Ç—å –¥–ª—è –ø–æ—á–∞—Ç–∫—ñ–≤—Ü—ñ–≤. –î—É–∂–µ –∑–∞–¥–æ–≤–æ–ª–µ–Ω–∞ –ø–æ–∫—É–ø–∫–æ—é, —Ä–µ–∫–æ–º–µ–Ω–¥—É—é –≤—Å—ñ–º –ø–æ–¥—Ä—É–≥–∞–º!',
                'category_badge': '–í—ñ–±—Ä–∞—Ç–æ—Ä–∏'
            },
            {
                'author_name': '–ú–∞—Ä—ñ—è',
                'rating': 5,
                'text': '–ó–∞–º–æ–≤–∏–ª–∞ —Ü–µ–π —Å—Ç–∏–º—É–ª—è—Ç–æ—Ä –ø—ñ—Å–ª—è –¥–æ–≤–≥–∏—Ö —Ä–æ–∑–¥—É–º—ñ–≤ —ñ –Ω–µ –ø–æ—à–∫–æ–¥—É–≤–∞–ª–∞! –Ø–∫—ñ—Å—Ç—å –Ω–∞ –≤–∏—Å–æ—Ç—ñ, —Ä–æ–±–æ—Ç–∞ –±–µ–∑—à—É–º–Ω–∞, –µ—Ñ–µ–∫—Ç –≤—Ä–∞–∂–∞—î. –î–æ—Å—Ç–∞–≤–∫–∞ —à–≤–∏–¥–∫–∞, —É–ø–∞–∫–æ–≤–∫–∞ –¥–∏—Å–∫—Ä–µ—Ç–Ω–∞.',
                'category_badge': '–°—Ç–∏–º—É–ª—è—Ç–æ—Ä–∏'
            },
            {
                'author_name': '–î–º–∏—Ç—Ä–æ',
                'rating': 4,
                'text': '–•–æ—Ä–æ—à–∏–π —Ç–æ–≤–∞—Ä –∑–∞ —Å–≤–æ—é —Ü—ñ–Ω—É. –ú–∞—Ç–µ—Ä—ñ–∞–ª —è–∫—ñ—Å–Ω–∏–π, –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –∑—Ä—É—á–Ω–µ. –Ñ–¥–∏–Ω–∏–π –º—ñ–Ω—É—Å - —Ç—Ä–æ—Ö–∏ –≥—É—á–Ω—ñ—à–µ –ø—Ä–∞—Ü—é—î, –Ω—ñ–∂ –æ—á—ñ–∫—É–≤–∞–≤. –í —Ü—ñ–ª–æ–º—É –∑–∞–¥–æ–≤–æ–ª–µ–Ω–∏–π.',
                'category_badge': '–ú–∞—Å—Ç—É—Ä–±–∞—Ç–æ—Ä'
            },
            {
                'author_name': '–ù–∞—Ç–∞–ª—ñ—è',
                'rating': 5,
                'text': '–¶–µ –º–æ—è –ø–µ—Ä—à–∞ –ø–æ–∫—É–ø–∫–∞ —Ç–∞–∫–æ–≥–æ —Ç–∏–ø—É —ñ —è –≤ –∑–∞—Ö–≤–∞—Ç—ñ! –î—É–∂–µ –¥–µ–ª—ñ–∫–∞—Ç–Ω–∞ –¥–æ—Å—Ç–∞–≤–∫–∞, –≥–∞—Ä–Ω–∞ —É–ø–∞–∫–æ–≤–∫–∞. –°–∞–º —Ç–æ–≤–∞—Ä –ø–µ—Ä–µ–≤–µ—Ä—à–∏–≤ –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è, —Ç–µ–ø–µ—Ä —Ä–æ–∑—É–º—ñ—é, —â–æ –≤–∏—Ç—Ä–∞—á–∞–ª–∞ —á–∞—Å –º–∞—Ä–Ω–æ —Ä–∞–Ω—ñ—à–µ üòä',
                'category_badge': '–í—ñ–±—Ä–∞—Ç–æ—Ä–∏'
            },
            {
                'author_name': '–Ü—Ä–∏–Ω–∞',
                'rating': 5,
                'text': '–í—ñ–¥–º—ñ–Ω–Ω–∞ —è–∫—ñ—Å—Ç—å! –ë—Ä–∞–ª–∞ —è–∫ –ø–æ–¥–∞—Ä—É–Ω–æ–∫ –ø–æ–¥—Ä—É–∑—ñ, –≤–æ–Ω–∞ –≤ –∑–∞—Ö–≤–∞—Ç—ñ. –ú–∞—Ç–µ—Ä—ñ–∞–ª –ø—Ä–∏—î–º–Ω–∏–π –Ω–∞ –¥–æ—Ç–∏–∫, –≤—Å–µ –ø—Ä–∞—Ü—é—î —è–∫ —Ç—Ä–µ–±–∞. –î—è–∫—É—é –º–∞–≥–∞–∑–∏–Ω—É –∑–∞ —à–≤–∏–¥–∫—É –æ–±—Ä–æ–±–∫—É –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è!',
                'category_badge': '–°—Ç–∏–º—É–ª—è—Ç–æ—Ä–∏'
            },
            {
                'author_name': '–ê–Ω–¥—Ä—ñ–π',
                'rating': 4,
                'text': '–ó–∞–¥–æ–≤–æ–ª–µ–Ω–∏–π –ø–æ–∫—É–ø–∫–æ—é, –∞–ª–µ –¥—É–º–∞–≤ –±—É–¥–µ —Ç—Ä–æ—Ö–∏ —ñ–Ω–∞–∫—à–µ. –Ø–∫—ñ—Å—Ç—å —Ö–æ—Ä–æ—à–∞, —É–ø–∞–∫–æ–≤–∫–∞ –¥–∏—Å–∫—Ä–µ—Ç–Ω–∞. –ú–æ–∂–ª–∏–≤–æ —Å–ø—Ä–æ–±—É—é —ñ–Ω—à—ñ –º–æ–¥–µ–ª—ñ –ø—ñ–∑–Ω—ñ—à–µ.',
                'category_badge': '–ú–∞—Å—Ç—É—Ä–±–∞—Ç–æ—Ä'
            }
        ]

        active_products = list(Product.objects.filter(is_active=True))
        
        if not active_products:
            self.stdout.write(self.style.ERROR('–ù–µ–º–∞—î –∞–∫—Ç–∏–≤–Ω–∏—Ö —Ç–æ–≤–∞—Ä—ñ–≤ –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –≤—ñ–¥–≥—É–∫—ñ–≤'))
            return

        ProductReview.objects.all().delete()
        created_count = 0

        for review_data in reviews_data:
            product = random.choice(active_products)
            
            ProductReview.objects.create(
                product=product,
                author_name=review_data['author_name'],
                rating=review_data['rating'],
                text=review_data['text'],
                category_badge=review_data['category_badge'],
                is_approved=True
            )
            created_count += 1

        self.stdout.write(
            self.style.SUCCESS(f'‚úì –°—Ç–≤–æ—Ä–µ–Ω–æ {created_count} –≤—ñ–¥–≥—É–∫—ñ–≤')
        )

