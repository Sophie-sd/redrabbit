{% extends 'base.html' %}
{% load static %}

{% block title %}–Ü–Ω—Ç–∏–º-—à–æ–ø - –¢–æ–≤–∞—Ä–∏ –¥–ª—è –¥–æ—Ä–æ—Å–ª–∏—Ö –∑ –¥–∏—Å–∫—Ä–µ—Ç–Ω–æ—é –¥–æ—Å—Ç–∞–≤–∫–æ—é{% endblock %}
{% block description %}–Ü–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω —ñ–Ω—Ç–∏–º–Ω–∏—Ö —Ç–æ–≤–∞—Ä—ñ–≤ –¥–ª—è –¥–æ—Ä–æ—Å–ª–∏—Ö. –®–∏—Ä–æ–∫–∏–π –≤–∏–±—ñ—Ä —è–∫—ñ—Å–Ω–æ—ó –ø—Ä–æ–¥—É–∫—Ü—ñ—ó, –¥–∏—Å–∫—Ä–µ—Ç–Ω–∞ —É–ø–∞–∫–æ–≤–∫–∞ —Ç–∞ –¥–æ—Å—Ç–∞–≤–∫–∞ –ø–æ –£–∫—Ä–∞—ó–Ω—ñ. –ö–æ–Ω—Ñ—ñ–¥–µ–Ω—Ü—ñ–π–Ω—ñ—Å—Ç—å –≥–∞—Ä–∞–Ω—Ç–æ–≤–∞–Ω–∞. 18+{% endblock %}

{% block content %}
<!-- Main Layout with Sidebar Catalog -->
<div class="home-main-layout">
    <div class="container">
        <div class="layout-grid">
            <!-- Left Sidebar Catalog -->
            <aside class="home-catalog-sidebar">
                {% include 'includes/sidebar-menu.html' %}
            </aside>
            
            <!-- Right Content Area -->
            <div class="home-content">
                <!-- Banner Slider Section -->
                <section class="banner-slider-section" aria-label="–†–µ–∫–ª–∞–º–Ω—ñ –±–∞–Ω–µ—Ä–∏">
    <div class="banner-slider-container" id="bannerSlider">
        {% if banners %}
            <div class="banner-slider">
                {% for banner in banners %}
                    <div class="banner-slide {% if forloop.first %}active{% endif %}">
                        {% if banner.link_url %}
                            <a href="{{ banner.link_url }}" target="_blank" rel="noopener">
                                <picture>
                                    <source media="(max-width: 768px)" srcset="{{ banner.mobile_image.url }}">
                                    <img src="{{ banner.desktop_image.url }}" alt="{{ banner.alt_text }}" loading="lazy" class="banner-image">
                                </picture>
                            </a>
                        {% else %}
                            <picture>
                                <source media="(max-width: 768px)" srcset="{{ banner.mobile_image.url }}">
                                <img src="{{ banner.desktop_image.url }}" alt="{{ banner.alt_text }}" loading="lazy" class="banner-image">
                            </picture>
                        {% endif %}
                    </div>
                {% endfor %}
            </div>
            
            {% if banners.count > 1 %}
                <!-- Navigation Arrows -->
                <button class="banner-nav banner-nav-prev" aria-label="–ü–æ–ø–µ—Ä–µ–¥–Ω—ñ–π –±–∞–Ω–µ—Ä">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <polyline points="15 18 9 12 15 6"></polyline>
                    </svg>
                </button>
                <button class="banner-nav banner-nav-next" aria-label="–ù–∞—Å—Ç—É–ø–Ω–∏–π –±–∞–Ω–µ—Ä">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <polyline points="9 18 15 12 9 6"></polyline>
                    </svg>
                </button>
                
                <!-- Navigation Dots -->
                <div class="banner-dots"></div>
            {% endif %}
        {% else %}
            <div class="banner-placeholder">
                <div class="placeholder-content">
                    <div class="placeholder-icon">üñºÔ∏è</div>
                    <h3>–ë–∞–Ω–µ—Ä —Å–ª–∞–π–¥–µ—Ä</h3>
                    <p class="placeholder-text">–î–µ—Å–∫—Ç–æ–ø: 1200√ó400px | –ú–æ–±—ñ–ª—å–Ω–∏–π: 375√ó280px</p>
                    <small>–î–æ–¥–∞–π—Ç–µ –±–∞–Ω–µ—Ä–∏ —á–µ—Ä–µ–∑ –∞–¥–º—ñ–Ω –ø–∞–Ω–µ–ª—å</small>
                </div>
            </div>
        {% endif %}
    </div>
</section>

<!-- Sale Products Section -->
<section class="promotions-section" aria-label="–ê–∫—Ü—ñ–π–Ω—ñ —Ç–æ–≤–∞—Ä–∏">
    <div class="container">
        <div class="section-header">
            <h2 class="section-title">–ê–∫—Ü—ñ—ó</h2>
        </div>
        
        {% if sale_products %}
        <div class="promotions-slider-container">
            <button class="promo-nav-btn promo-prev-btn" aria-label="–ü–æ–ø–µ—Ä–µ–¥–Ω—ñ">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M15 18L9 12L15 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>
            
            <div class="promotions-slider" id="promotionsSlider">
                {% for product in sale_products %}
                    <div class="promo-card">
                        <div class="promo-image">
                            <a href="{{ product.get_absolute_url }}" class="promo-link">
                                {% if product.images.first %}
                                    <img src="{{ product.images.first.get_image_url }}" alt="{{ product.name }}" loading="lazy">
                                {% else %}
                                    <div class="product-placeholder">üì¶</div>
                                {% endif %}
                            </a>
                            
                            <button 
                                type="button"
                                class="product-card__wishlist" 
                                data-product-id="{{ product.id }}" 
                                aria-label="–î–æ–¥–∞—Ç–∏ –≤ –æ–±—Ä–∞–Ω–µ"
                                title="–î–æ–¥–∞—Ç–∏ –≤ –æ–±—Ä–∞–Ω–µ"
                            >
                                <span class="product-card__wishlist-icon">‚ô°</span>
                            </button>
                            
                            <div class="promo-badges">
                                {% include 'includes/sale_countdown.html' with product=product %}
                                {% if product.is_top %}
                                    <span class="badge badge-top">–¢–û–ü –ü–†–û–î–ê–ñ</span>
                                {% endif %}
                                {% if product.video_url %}
                                    <span class="badge badge-video">–í–Ü–î–ï–û</span>
                                {% endif %}
                            </div>
                        </div>
                        
                        <div class="promo-content">
                            <h3 class="promo-name">
                                <a href="{{ product.get_absolute_url }}">{{ product.name }}</a>
                            </h3>
                            
                            <div class="promo-price">
                                {% if product.is_sale_active %}
                                    <span class="price-new">{{ product.sale_price }} ‚Ç¥</span>
                                    <span class="price-old">{{ product.retail_price }} ‚Ç¥</span>
                                {% else %}
                                    <span class="price-new">{{ product.retail_price }} ‚Ç¥</span>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
            
            <button class="promo-nav-btn promo-next-btn" aria-label="–ù–∞—Å—Ç—É–ø–Ω—ñ">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M9 18L15 12L9 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>
        </div>
        <div class="promotions-view-all">
            <a href="{% url 'products:sale' %}" class="btn-view-all">
                –î–∏–≤–∏—Ç–∏—Å—å –≤—Å—ñ –∞–∫—Ü—ñ—ó
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M5 12h14M12 5l7 7-7 7"/>
                </svg>
            </a>
        </div>
        {% else %}
            <p class="text-center text-muted">–ù–∞—Ä–∞–∑—ñ –Ω–µ–º–∞—î –∞–∫—Ü—ñ–π–Ω–∏—Ö —Ç–æ–≤–∞—Ä—ñ–≤</p>
        {% endif %}
    </div>
</section>

<!-- Top Products Section -->
<section class="promotions-section" aria-label="–õ—ñ–¥–µ—Ä–∏ –ø—Ä–æ–¥–∞–∂—É">
    <div class="container">
        <div class="section-header">
            <h2 class="section-title">–õ—ñ–¥–µ—Ä–∏ –ø—Ä–æ–¥–∞–∂—É</h2>
        </div>
        
        {% if top_products %}
        <div class="promotions-slider-container">
            <button class="promo-nav-btn promo-prev-btn" aria-label="–ü–æ–ø–µ—Ä–µ–¥–Ω—ñ">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M15 18L9 12L15 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>
            
            <div class="promotions-slider" id="topProductsSlider">
                {% for product in top_products %}
                    <div class="promo-card">
                        <div class="promo-image">
                            <a href="{{ product.get_absolute_url }}" class="promo-link">
                                {% if product.images.first %}
                                    <img src="{{ product.images.first.get_image_url }}" alt="{{ product.name }}" loading="lazy">
                                {% else %}
                                    <div class="product-placeholder">üì¶</div>
                                {% endif %}
                            </a>
                            
                            <button 
                                type="button"
                                class="product-card__wishlist" 
                                data-product-id="{{ product.id }}" 
                                aria-label="–î–æ–¥–∞—Ç–∏ –≤ –æ–±—Ä–∞–Ω–µ"
                                title="–î–æ–¥–∞—Ç–∏ –≤ –æ–±—Ä–∞–Ω–µ"
                            >
                                <span class="product-card__wishlist-icon">‚ô°</span>
                            </button>
                            
                            <div class="promo-badges">
                                {% include 'includes/sale_countdown.html' with product=product %}
                                {% if product.is_top %}
                                    <span class="badge badge-top">–¢–û–ü –ü–†–û–î–ê–ñ</span>
                                {% endif %}
                                {% if product.video_url %}
                                    <span class="badge badge-video">–í–Ü–î–ï–û</span>
                                {% endif %}
                            </div>
                        </div>
                        
                        <div class="promo-content">
                            <h3 class="promo-name">
                                <a href="{{ product.get_absolute_url }}">{{ product.name }}</a>
                            </h3>
                            
                            <div class="promo-price">
                                {% if product.is_sale_active %}
                                    <span class="price-new">{{ product.sale_price }} ‚Ç¥</span>
                                    <span class="price-old">{{ product.retail_price }} ‚Ç¥</span>
                                {% else %}
                                    <span class="price-new">{{ product.retail_price }} ‚Ç¥</span>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
            
            <button class="promo-nav-btn promo-next-btn" aria-label="–ù–∞—Å—Ç—É–ø–Ω—ñ">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M9 18L15 12L9 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>
        </div>
        {% else %}
            <p class="text-center text-muted">–ù–∞—Ä–∞–∑—ñ –Ω–µ–º–∞—î —Ç–æ–ø —Ç–æ–≤–∞—Ä—ñ–≤</p>
        {% endif %}
    </div>
</section>

<section class="promo-images-section" aria-label="–ü—Ä–æ–º–æ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è">
    <div class="container">
        <div class="promo-images-grid">
            <div class="promo-image-item">
                <picture>
                    <source media="(max-width: 768px)" srcset="{% static 'images/fon_image_mb1.png' %}">
                    <img src="{% static 'images/fon_image1.png' %}" alt="–ü—Ä–æ–º–æ 1" loading="lazy">
                </picture>
            </div>
            <div class="promo-image-item">
                <picture>
                    <source media="(max-width: 768px)" srcset="{% static 'images/fon_image_mb2.png' %}">
                    <img src="{% static 'images/fon_image2.png' %}" alt="–ü—Ä–æ–º–æ 2" loading="lazy">
                </picture>
            </div>
            <div class="promo-image-item">
                <picture>
                    <source media="(max-width: 768px)" srcset="{% static 'images/fon_image_mb3.png' %}">
                    <img src="{% static 'images/fon_image3.png' %}" alt="–ü—Ä–æ–º–æ 3" loading="lazy">
                </picture>
            </div>
        </div>
    </div>
</section>

<!-- Brands Section -->
{% if brands %}
<section class="brands-section" aria-label="–ë—Ä–µ–Ω–¥–∏">
    <div class="container">
        <div class="section-header text-center">
            <h2 class="section-title">–ü–æ–ø—É–ª—è—Ä–Ω—ñ –±—Ä–µ–Ω–¥–∏</h2>
            <p class="section-subtitle">–ü—Ä–∞—Ü—é—î–º–æ –∑ –Ω–∞–π–∫—Ä–∞—â–∏–º–∏ –≤–∏—Ä–æ–±–Ω–∏–∫–∞–º–∏</p>
        </div>
        
        <div class="brands-grid">
            {% for brand in brands %}
            <div class="brand-card">
                <div class="brand-card__logo">
                    {% if brand.logo %}
                        <img src="{{ brand.logo.url }}" alt="{{ brand.name }}" loading="lazy">
                    {% else %}
                        <div class="brand-placeholder">{{ brand.name|slice:":2"|upper }}</div>
                    {% endif %}
                </div>
                <div class="brand-card__name">{{ brand.name }}</div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>
{% endif %}

<!-- Reviews Section -->
{% if reviews %}
<section class="reviews-section" aria-label="–í—ñ–¥–≥—É–∫–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤">
    <div class="container">
        <div class="section-header text-center">
            <h2 class="section-title">–í—ñ–¥–≥—É–∫–∏ –∫–ª—ñ—î–Ω—Ç—ñ–≤</h2>
            <p class="section-subtitle">–©–æ –∫–∞–∂—É—Ç—å –Ω–∞—à—ñ –ø–æ–∫—É–ø—Ü—ñ</p>
        </div>
        
        <div class="reviews-slider-container">
            <button class="slider-nav-btn slider-prev-btn" aria-label="–ü–æ–ø–µ—Ä–µ–¥–Ω—ñ –≤—ñ–¥–≥—É–∫–∏">
                <svg width="24" height="24" viewBox="0 0 24 24">
                    <path d="M15 18L9 12L15 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>
            
            <div class="reviews-slider" id="reviewsSlider">
                {% for review in reviews %}
                <div class="review-card">
                    {% if review.category_badge %}
                    <span class="review-badge">{{ review.category_badge }}</span>
                    {% endif %}
                    
                    <div class="review-product">
                        <div class="review-product__image">
                            {% if review.product.images.first %}
                                <img src="{{ review.product.images.first.get_image_url }}" alt="{{ review.product.name }}" loading="lazy">
                            {% endif %}
                        </div>
                        <a href="{{ review.product.get_absolute_url }}" class="review-product__name">
                            {{ review.product.name }}
                        </a>
                    </div>
                    
                    <div class="review-text">
                        <p>{{ review.text|truncatewords:30 }}</p>
                    </div>
                    
                    <div class="review-footer">
                        <div class="review-author">
                            <span class="review-author__icon">üë§</span>
                            <span class="review-author__name">{{ review.author_name }}</span>
                        </div>
                        <div class="review-rating">
                            {% for i in "12345" %}
                                <span class="star {% if forloop.counter <= review.rating %}active{% endif %}">‚≠ê</span>
                            {% endfor %}
                        </div>
                        <div class="review-date">
                            üìÖ {{ review.created_at|date:"d F Y" }}
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
            
            <button class="slider-nav-btn slider-next-btn" aria-label="–ù–∞—Å—Ç—É–ø–Ω—ñ –≤—ñ–¥–≥—É–∫–∏">
                <svg width="24" height="24" viewBox="0 0 24 24">
                    <path d="M9 18L15 12L9 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>
        </div>
    </div>
</section>
{% endif %}

<!-- Top Products Section -->
{% if top_products %}
<section class="top-products-section section-padding" aria-label="–•—ñ—Ç–∏ –ø—Ä–æ–¥–∞–∂—É">
    <div class="container">
        <div class="section-header text-center">
            <h2 class="section-title">–•—ñ—Ç–∏ –ø—Ä–æ–¥–∞–∂—É</h2>
            <p class="section-subtitle">–ù–∞–π–ø–æ–ø—É–ª—è—Ä–Ω—ñ—à—ñ —Ç–æ–≤–∞—Ä–∏ —Ü—å–æ–≥–æ –º—ñ—Å—è—Ü—è</p>
        </div>
        
        <div class="products-grid">
            {% for product in top_products %}
            <div class="product-card">
                <a href="{{ product.get_absolute_url }}" class="product-card__link">
                    <div class="product-card__image">
                        {% if product.images.first %}
                            <img src="{{ product.images.first.get_image_url }}" alt="{{ product.name }}" loading="lazy">
                        {% endif %}
                        {% if product.is_top %}
                        <span class="product-badge badge-hit">–•–Ü–¢</span>
                        {% endif %}
                    </div>
                    <div class="product-card__content">
                        {% include 'includes/sale_countdown.html' with product=product %}
                        <h3 class="product-card__title">{{ product.name }}</h3>
                        <div class="product-card__price">
                            {% if product.is_sale_active %}
                                <span class="price-new">{{ product.sale_price }} ‚Ç¥</span>
                                <span class="price-old">{{ product.retail_price }} ‚Ç¥</span>
                            {% else %}
                                <span class="price">{{ product.retail_price }} ‚Ç¥</span>
                            {% endif %}
                        </div>
                    </div>
                </a>
                <div class="product-card__actions">
                    <button class="btn btn-primary btn-sm add-to-cart" 
                            data-product-id="{{ product.id }}"
                            data-product-name="{{ product.name }}"
                            {% if not product.is_in_stock %}disabled{% endif %}>
                        {% if product.is_in_stock %}
                            –ö—É–ø–∏—Ç–∏
                        {% else %}
                            –ù–µ–º–∞—î –≤ –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ
                        {% endif %}
                    </button>
                    <button class="btn btn-outline btn-sm wishlist-btn" 
                            data-product-id="{{ product.id }}"
                            aria-label="–î–æ–¥–∞—Ç–∏ –≤ —Å–ø–∏—Å–æ–∫ –±–∞–∂–∞–Ω—å">
                        <span class="icon-heart">‚ô°</span>
                    </button>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>
{% endif %}
            </div>  <!-- /.home-content -->
        </div>  <!-- /.layout-grid -->
    </div>  <!-- /.container -->
</div>  <!-- /.home-main-layout -->
{% endblock %}

{% block extra_js %}
<script src="{% static 'js/banner-slider.min.js' %}"></script>
<script src="{% static 'js/promotions-slider.js' %}"></script>
<script src="{% static 'js/top-products-slider.js' %}"></script>
<script src="{% static 'js/reviews-slider.js' %}"></script>
<script src="{% static 'js/sidebar-menu.js' %}"></script>
{% endblock %}
