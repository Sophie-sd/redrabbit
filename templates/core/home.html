{% extends 'base.html' %}
{% load static %}

{% block title %}–Ü–Ω—Ç–∏–º-—à–æ–ø - –¢–æ–≤–∞—Ä–∏ –¥–ª—è –¥–æ—Ä–æ—Å–ª–∏—Ö –∑ –¥–∏—Å–∫—Ä–µ—Ç–Ω–æ—é –¥–æ—Å—Ç–∞–≤–∫–æ—é{% endblock %}
{% block description %}–Ü–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω —ñ–Ω—Ç–∏–º–Ω–∏—Ö —Ç–æ–≤–∞—Ä—ñ–≤ –¥–ª—è –¥–æ—Ä–æ—Å–ª–∏—Ö. –®–∏—Ä–æ–∫–∏–π –≤–∏–±—ñ—Ä —è–∫—ñ—Å–Ω–æ—ó –ø—Ä–æ–¥—É–∫—Ü—ñ—ó, –¥–∏—Å–∫—Ä–µ—Ç–Ω–∞ —É–ø–∞–∫–æ–≤–∫–∞ —Ç–∞ –¥–æ—Å—Ç–∞–≤–∫–∞ –ø–æ –£–∫—Ä–∞—ó–Ω—ñ. –ö–æ–Ω—Ñ—ñ–¥–µ–Ω—Ü—ñ–π–Ω—ñ—Å—Ç—å –≥–∞—Ä–∞–Ω—Ç–æ–≤–∞–Ω–∞. 18+{% endblock %}

{% block content %}
<!-- Main Layout with Sidebar Catalog -->
<div class="home-main-layout">
    <div class="container">
        <div class="layout-grid">
            <!-- Left Sidebar Catalog -->
            <aside class="home-catalog-sidebar">
                {% include 'includes/sidebar-menu.html' %}
            </aside>
            
            <!-- Right Content Area -->
            <div class="home-content">
                <!-- Banner Slider Section -->
                <section class="banner-slider-section" aria-label="–†–µ–∫–ª–∞–º–Ω—ñ –±–∞–Ω–µ—Ä–∏">
    <div class="banner-slider-container" id="bannerSlider">
        {% if banners %}
            <div class="banner-slider">
                {% for banner in banners %}
                    <div class="banner-slide {% if forloop.first %}active{% endif %}">
                        {% if banner.link_url %}
                            <a href="{{ banner.link_url }}" target="_blank" rel="noopener">
                                <picture>
                                    <source media="(max-width: 768px)" srcset="{{ banner.mobile_image.url }}">
                                    <img src="{{ banner.desktop_image.url }}" alt="{{ banner.alt_text }}" loading="lazy" class="banner-image">
                                </picture>
                            </a>
                        {% else %}
                            <picture>
                                <source media="(max-width: 768px)" srcset="{{ banner.mobile_image.url }}">
                                <img src="{{ banner.desktop_image.url }}" alt="{{ banner.alt_text }}" loading="lazy" class="banner-image">
                            </picture>
                        {% endif %}
                    </div>
                {% endfor %}
            </div>
            
            {% if banners.count > 1 %}
                <!-- Navigation Arrows -->
                <button class="banner-nav banner-nav-prev" aria-label="–ü–æ–ø–µ—Ä–µ–¥–Ω—ñ–π –±–∞–Ω–µ—Ä">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <polyline points="15 18 9 12 15 6"></polyline>
                    </svg>
                </button>
                <button class="banner-nav banner-nav-next" aria-label="–ù–∞—Å—Ç—É–ø–Ω–∏–π –±–∞–Ω–µ—Ä">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <polyline points="9 18 15 12 9 6"></polyline>
                    </svg>
                </button>
                
                <!-- Navigation Dots -->
                <div class="banner-dots"></div>
            {% endif %}
        {% else %}
            <div class="banner-placeholder">
                <div class="placeholder-content">
                    <div class="placeholder-icon">üñºÔ∏è</div>
                    <h3>–ë–∞–Ω–µ—Ä —Å–ª–∞–π–¥–µ—Ä</h3>
                    <p class="placeholder-text">–î–µ—Å–∫—Ç–æ–ø: 1200√ó400px | –ú–æ–±—ñ–ª—å–Ω–∏–π: 375√ó280px</p>
                    <small>–î–æ–¥–∞–π—Ç–µ –±–∞–Ω–µ—Ä–∏ —á–µ—Ä–µ–∑ –∞–¥–º—ñ–Ω –ø–∞–Ω–µ–ª—å</small>
                </div>
            </div>
        {% endif %}
    </div>
</section>

<!-- Sale Products Section -->
<section class="promotions-section" aria-label="–ê–∫—Ü—ñ–π–Ω—ñ —Ç–æ–≤–∞—Ä–∏">
    <div class="container">
        <div class="section-header">
            <h2 class="section-title">–ê–∫—Ü—ñ—ó</h2>
        </div>
        
        {% if sale_products %}
        <div class="promotions-slider-container">
            <button class="promo-nav-btn promo-prev-btn" aria-label="–ü–æ–ø–µ—Ä–µ–¥–Ω—ñ">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M15 18L9 12L15 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>
            
            <div class="promotions-slider" id="promotionsSlider">
                {% for product in sale_products %}
                    {% include 'includes/promo_card.html' with product=product %}
                {% endfor %}
            </div>
            
            <button class="promo-nav-btn promo-next-btn" aria-label="–ù–∞—Å—Ç—É–ø–Ω—ñ">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M9 18L15 12L9 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>
        </div>
        <div class="promotions-view-all">
            <a href="{% url 'products:sale' %}" class="btn-view-all">
                –î–∏–≤–∏—Ç–∏—Å—å –≤—Å—ñ –∞–∫—Ü—ñ—ó
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M5 12h14M12 5l7 7-7 7"/>
                </svg>
            </a>
        </div>
        {% else %}
            <p class="text-center text-muted">–ù–∞—Ä–∞–∑—ñ –Ω–µ–º–∞—î –∞–∫—Ü—ñ–π–Ω–∏—Ö —Ç–æ–≤–∞—Ä—ñ–≤</p>
        {% endif %}
    </div>
</section>

<!-- Top Products Section -->
<section class="promotions-section" aria-label="–õ—ñ–¥–µ—Ä–∏ –ø—Ä–æ–¥–∞–∂—É">
    <div class="container">
        <div class="section-header">
            <h2 class="section-title">–õ—ñ–¥–µ—Ä–∏ –ø—Ä–æ–¥–∞–∂—É</h2>
        </div>
        
        {% if top_products %}
        <div class="promotions-slider-container">
            <button class="promo-nav-btn promo-prev-btn" aria-label="–ü–æ–ø–µ—Ä–µ–¥–Ω—ñ">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M15 18L9 12L15 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>
            
            <div class="promotions-slider" id="topProductsSlider">
                {% for product in top_products %}
                    {% include 'includes/promo_card.html' with product=product %}
                {% endfor %}
            </div>
            
            <button class="promo-nav-btn promo-next-btn" aria-label="–ù–∞—Å—Ç—É–ø–Ω—ñ">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M9 18L15 12L9 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>
        </div>
        {% else %}
            <p class="text-center text-muted">–î–æ–¥–∞–π—Ç–µ —Ç–æ–≤–∞—Ä–∏ —á–µ—Ä–µ–∑ –∞–¥–º—ñ–Ω–∫—É –≤ —Ä–æ–∑–¥—ñ–ª—ñ "–õ—ñ–¥–µ—Ä–∏ –ø—Ä–æ–¥–∞–∂—É"</p>
        {% endif %}
    </div>
</section>

<section class="promo-images-section" aria-label="–ü—Ä–æ–º–æ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è">
    <div class="container">
        <div class="promo-images-grid">
            <div class="promo-image-item">
                <picture>
                    <source media="(max-width: 768px)" srcset="{% static 'images/fon_image_mb1.png' %}">
                    <img src="{% static 'images/fon_image1.png' %}" alt="–ü—Ä–æ–º–æ 1" loading="lazy">
                </picture>
            </div>
            <div class="promo-image-item">
                <picture>
                    <source media="(max-width: 768px)" srcset="{% static 'images/fon_image_mb2.png' %}">
                    <img src="{% static 'images/fon_image2.png' %}" alt="–ü—Ä–æ–º–æ 2" loading="lazy">
                </picture>
            </div>
            <div class="promo-image-item">
                <picture>
                    <source media="(max-width: 768px)" srcset="{% static 'images/fon_image_mb3.png' %}">
                    <img src="{% static 'images/fon_image3.png' %}" alt="–ü—Ä–æ–º–æ 3" loading="lazy">
                </picture>
            </div>
        </div>
    </div>
</section>

            </div>  <!-- /.home-content -->
        </div>  <!-- /.layout-grid -->
    </div>  <!-- /.container -->
</div>  <!-- /.home-main-layout -->

<!-- Reviews Section -->
{% if reviews %}
<section class="reviews-section" aria-label="–í—ñ–¥–≥—É–∫–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤">
    <div class="container">
        <div class="section-header">
            <h2 class="section-title">–í—ñ–¥–≥—É–∫–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤</h2>
        </div>
        
        <div class="reviews-slider-container">
            <button class="reviews-nav-btn reviews-prev-btn" aria-label="–ü–æ–ø–µ—Ä–µ–¥–Ω—ñ –≤—ñ–¥–≥—É–∫–∏">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M15 18L9 12L15 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>
            
            <div class="reviews-slider" id="reviewsSlider">
                {% for review in reviews %}
                <div class="review-card">
                    <div class="review-product-info">
                        <div class="review-product-image">
                            {% with main_image=review.product.images.all|first %}
                                {% if main_image %}
                                    <img src="{{ main_image.get_image_url }}" alt="{{ review.product.name }}" loading="lazy">
                                {% endif %}
                            {% endwith %}
                        </div>
                        <div class="review-product-details">
                            <h3 class="review-product-name">{{ review.product.name }}</h3>
                            {% if review.category_badge %}
                                <span class="review-category-badge">{{ review.category_badge }}</span>
                            {% endif %}
                        </div>
                    </div>
                    
                    <div class="review-text">
                        <p>{{ review.text }}</p>
                        <button class="review-read-more" aria-label="–ß–∏—Ç–∞—Ç–∏ –±—ñ–ª—å—à–µ">–ë—ñ–ª—å—à–µ...</button>
                    </div>
                    
                    <div class="review-footer">
                        <div class="review-author">
                            <div class="review-author-avatar">
                                <svg viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                                </svg>
                            </div>
                            <span class="review-author-name">{{ review.author_name }}</span>
                        </div>
                        <div class="review-meta">
                            <div class="review-rating">
                                {% for i in "12345" %}
                                    {% if forloop.counter <= review.rating %}
                                        <span class="star star-filled">‚≠ê</span>
                                    {% else %}
                                        <span class="star star-empty">‚òÜ</span>
                                    {% endif %}
                                {% endfor %}
                            </div>
                            <span class="review-date">{{ review.created_at|date:"d.m.Y" }}</span>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
            
            <button class="reviews-nav-btn reviews-next-btn" aria-label="–ù–∞—Å—Ç—É–ø–Ω—ñ –≤—ñ–¥–≥—É–∫–∏">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M9 18L15 12L9 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>
        </div>
    </div>
</section>
{% endif %}

{% endblock %}

{% block extra_js %}
<script src="{% static 'js/banner-slider.min.js' %}"></script>
<script src="{% static 'js/promotions-slider.js' %}"></script>
<script src="{% static 'js/top-products-slider.js' %}"></script>
<script src="{% static 'js/reviews-slider.js' %}"></script>
<script src="{% static 'js/sidebar-menu.js' %}"></script>
{% endblock %}
