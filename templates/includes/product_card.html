<article class="product-card" 
    data-sale-price="{{ product.get_current_price }}"
    data-name="{{ product.name }}"
    data-is-top="{{ product.is_top }}"
    data-is-new="{{ product.is_new }}"
    data-is-sale="{{ product.is_sale_active }}"
    data-categories="{% for cat in product.categories.all %}{{ cat.slug }}{% if not forloop.last %},{% endif %}{% endfor %}"
>
    <div class="product-card__media">
        <a href="{{ product.get_absolute_url }}">
            {% if product.main_images %}
                <img src="{{ product.main_images.0.image.url }}" alt="{{ product.name }}" loading="lazy" class="product-card__image" width="300" height="300">
            {% elif product.images.first %}
                <img src="{{ product.images.first.get_image_url }}" alt="{{ product.name }}" loading="lazy" class="product-card__image" width="300" height="300">
            {% else %}
                <div class="product-card__placeholder">üì¶</div>
            {% endif %}
        </a>
        
        <button 
            type="button"
            class="product-card__wishlist" 
            data-product-id="{{ product.id }}" 
            aria-label="–î–æ–¥–∞—Ç–∏ –≤ –æ–±—Ä–∞–Ω–µ"
            title="–î–æ–¥–∞—Ç–∏ –≤ –æ–±—Ä–∞–Ω–µ"
        >
            <span class="product-card__wishlist-icon">‚ô°</span>
        </button>
        
        <div class="product-card__badges">
            {% include 'includes/sale_countdown.html' with product=product %}
            {% if product.is_new %}
                <span class="product-badge product-badge--new">NEW</span>
            {% endif %}
            {% if product.is_top %}
                <span class="product-badge product-badge--hit">–•–Ü–¢</span>
            {% endif %}
        </div>
    </div>
    
    <div class="product-card__content">
        <h3 class="product-card__name">
            <a href="{{ product.get_absolute_url }}" class="product-card__link">{{ product.name }}</a>
        </h3>
        
        <div class="product-card__price">
            {% if product.is_sale_active %}
                <span class="product-card__price-current">{{ product.sale_price }} ‚Ç¥</span>
                <span class="product-card__price-old">{{ product.retail_price }} ‚Ç¥</span>
            {% else %}
                <span class="product-card__price-current">{{ product.retail_price }} ‚Ç¥</span>
            {% endif %}
        </div>
    </div>
    
    <div class="product-card__actions">
        {% if product.is_in_stock %}
            <button 
                type="button"
                class="product-card__add-cart" 
                data-product-id="{{ product.id }}"
            >
                –î–æ –∫–æ—à–∏–∫–∞
            </button>
        {% else %}
            <button type="button" class="product-card__add-cart product-card__add-cart--disabled" disabled>
                –ù–µ–º–∞—î –≤ –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ
            </button>
        {% endif %}
    </div>
</article>

